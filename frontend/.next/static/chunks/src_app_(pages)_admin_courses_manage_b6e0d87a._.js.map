{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/massage-spa-training-system/frontend/src/app/%28pages%29/admin/courses/manage/CourseContentManager.tsx"],"sourcesContent":["// src/app/(pages)/admin/courses/manage/CourseContentManager.tsx\r\n'use client';\r\n\r\nimport '@ant-design/v5-patch-for-react-19';\r\nimport React from 'react';\r\nimport { Button, Input, Form, Typography, Collapse, Space, Popconfirm, Card, Tag } from 'antd';\r\nimport { PlusOutlined, DeleteOutlined, UpOutlined, DownOutlined, BoldOutlined, ItalicOutlined, StrikethroughOutlined, CodeOutlined, OrderedListOutlined, UnorderedListOutlined, BlockOutlined, LinkOutlined, ClearOutlined } from '@ant-design/icons';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport type { CollapseProps } from 'antd';\r\n\r\n// TipTap Imports\r\nimport { useEditor, EditorContent, Editor } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport Link from '@tiptap/extension-link';\r\n\r\nconst { Text } = Typography;\r\n\r\n// Interfaces for Course Content Structure\r\nexport interface CourseContentModule {\r\n  id: string;\r\n  moduleName: string;\r\n  contents: CourseContentItem[];\r\n}\r\n\r\nexport interface CourseContentItem {\r\n  id: string;\r\n  itemTitle: string;\r\n  itemDescription: string; // This will now hold HTML content from TipTap\r\n  itemType: 'text' | 'video' | 'quiz' | 'document'; // Example types\r\n}\r\n\r\ninterface CourseContentManagerProps {\r\n  modules: CourseContentModule[];\r\n  onModulesChange: (newModules: CourseContentModule[]) => void;\r\n}\r\n\r\n// TipTap Toolbar Component\r\ninterface TipTapToolbarProps {\r\n  editor: Editor | null;\r\n}\r\n\r\nconst TipTapToolbar: React.FC<TipTapToolbarProps> = ({ editor }) => {\r\n  if (!editor) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap gap-1 p-2 border-b border-gray-200 bg-gray-50 rounded-t-lg\">\r\n      <Button\r\n        onClick={() => editor.chain().focus().toggleBold().run()}\r\n        disabled={!editor.can().chain().focus().toggleBold().run()}\r\n        className={editor.isActive('bold') ? 'is-active' : ''}\r\n        icon={<BoldOutlined />}\r\n        size=\"small\"\r\n        aria-label=\"Bold\"\r\n      />\r\n      <Button\r\n        onClick={() => editor.chain().focus().toggleItalic().run()}\r\n        disabled={!editor.can().chain().focus().toggleItalic().run()}\r\n        className={editor.isActive('italic') ? 'is-active' : ''}\r\n        icon={<ItalicOutlined />}\r\n        size=\"small\"\r\n        aria-label=\"Italic\"\r\n      />\r\n      <Button\r\n        onClick={() => editor.chain().focus().toggleStrike().run()}\r\n        disabled={!editor.can().chain().focus().toggleStrike().run()}\r\n        className={editor.isActive('strike') ? 'is-active' : ''}\r\n        icon={<StrikethroughOutlined />}\r\n        size=\"small\"\r\n        aria-label=\"Strike\"\r\n      />\r\n      <Button\r\n        onClick={() => editor.chain().focus().toggleCode().run()}\r\n        disabled={!editor.can().chain().focus().toggleCode().run()}\r\n        className={editor.isActive('code') ? 'is-active' : ''}\r\n        icon={<CodeOutlined />}\r\n        size=\"small\"\r\n        aria-label=\"Code\"\r\n      />\r\n      <Button\r\n        onClick={() => editor.chain().focus().setParagraph().run()}\r\n        className={editor.isActive('paragraph') ? 'is-active' : ''}\r\n        icon={<BlockOutlined />} // Represents paragraph/block\r\n        size=\"small\"\r\n        aria-label=\"Paragraph\"\r\n      />\r\n      <Button\r\n        onClick={() => editor.chain().focus().toggleHeading({ level: 1 }).run()}\r\n        className={editor.isActive('heading', { level: 1 }) ? 'is-active' : ''}\r\n        size=\"small\"\r\n      >\r\n        H1\r\n      </Button>\r\n      <Button\r\n        onClick={() => editor.chain().focus().toggleHeading({ level: 2 }).run()}\r\n        className={editor.isActive('heading', { level: 2 }) ? 'is-active' : ''}\r\n        size=\"small\"\r\n      >\r\n        H2\r\n      </Button>\r\n      <Button\r\n        onClick={() => editor.chain().focus().toggleBulletList().run()}\r\n        disabled={!editor.can().chain().focus().toggleBulletList().run()}\r\n        className={editor.isActive('bulletList') ? 'is-active' : ''}\r\n        icon={<UnorderedListOutlined />}\r\n        size=\"small\"\r\n        aria-label=\"Bullet List\"\r\n      />\r\n      <Button\r\n        onClick={() => editor.chain().focus().toggleOrderedList().run()}\r\n        disabled={!editor.can().chain().focus().toggleOrderedList().run()}\r\n        className={editor.isActive('orderedList') ? 'is-active' : ''}\r\n        icon={<OrderedListOutlined />}\r\n        size=\"small\"\r\n        aria-label=\"Ordered List\"\r\n      />\r\n      <Button\r\n        onClick={() => {\r\n          const url = window.prompt('URL:');\r\n          if (url) {\r\n            editor.chain().focus().setLink({ href: url, target: '_blank' }).run();\r\n          }\r\n        }}\r\n        className={editor.isActive('link') ? 'is-active' : ''}\r\n        icon={<LinkOutlined />}\r\n        size=\"small\"\r\n        aria-label=\"Set Link\"\r\n      />\r\n      <Button\r\n        onClick={() => editor.chain().focus().unsetLink().run()}\r\n        disabled={!editor.isActive('link')}\r\n        icon={<ClearOutlined />} // Using clear for unset link\r\n        size=\"small\"\r\n        aria-label=\"Unset Link\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst CourseContentManager: React.FC<CourseContentManagerProps> = ({ modules, onModulesChange }) => {\r\n\r\n  // --- Module Management Functions ---\r\n  const addModule = () => {\r\n    const newModule: CourseContentModule = {\r\n      id: uuidv4(),\r\n      moduleName: `โมดูลใหม่ ${modules.length + 1}`,\r\n      contents: [],\r\n    };\r\n    onModulesChange([...modules, newModule]);\r\n  };\r\n\r\n  const updateModule = (moduleId: string, newName: string) => {\r\n    const updatedModules = modules.map(mod =>\r\n      mod.id === moduleId ? { ...mod, moduleName: newName } : mod\r\n    );\r\n    onModulesChange(updatedModules);\r\n  };\r\n\r\n  const deleteModule = (moduleId: string) => {\r\n    const updatedModules = modules.filter(mod => mod.id !== moduleId);\r\n    onModulesChange(updatedModules);\r\n  };\r\n\r\n  const moveModule = (moduleId: string, direction: 'up' | 'down') => {\r\n    const currentIndex = modules.findIndex(mod => mod.id === moduleId);\r\n    if (currentIndex === -1) return;\r\n\r\n    const newModules = [...modules];\r\n    let newIndex = currentIndex;\r\n\r\n    if (direction === 'up') {\r\n      newIndex = Math.max(0, currentIndex - 1);\r\n    } else {\r\n      newIndex = Math.min(modules.length - 1, currentIndex + 1);\r\n    }\r\n\r\n    // Swap elements\r\n    const [movedModule] = newModules.splice(currentIndex, 1);\r\n    newModules.splice(newIndex, 0, movedModule);\r\n    onModulesChange(newModules);\r\n  };\r\n\r\n  // --- Content Item Management Functions ---\r\n  const addContentItem = (moduleId: string) => {\r\n    const updatedModules = modules.map(mod =>\r\n      mod.id === moduleId\r\n        ? {\r\n            ...mod,\r\n            contents: [\r\n              ...mod.contents,\r\n              {\r\n                id: uuidv4(),\r\n                itemTitle: `เนื้อหาใหม่ ${mod.contents.length + 1}`,\r\n                itemDescription: '',\r\n                itemType: 'text',\r\n              } as CourseContentItem,\r\n            ],\r\n          }\r\n        : mod\r\n    );\r\n    onModulesChange(updatedModules);\r\n  };\r\n\r\n  const updateContentItem = (moduleId: string, itemId: string, updatedItem: Partial<CourseContentItem>) => {\r\n    const updatedModules = modules.map(mod =>\r\n      mod.id === moduleId\r\n        ? {\r\n            ...mod,\r\n            contents: mod.contents.map(item =>\r\n              item.id === itemId\r\n                ? ({ ...item, ...updatedItem } as CourseContentItem)\r\n                : item\r\n            ),\r\n          }\r\n        : mod\r\n    );\r\n    onModulesChange(updatedModules);\r\n  };\r\n\r\n  const deleteContentItem = (moduleId: string, itemId: string) => {\r\n    const updatedModules = modules.map(mod =>\r\n      mod.id === moduleId\r\n        ? {\r\n            ...mod,\r\n            contents: mod.contents.filter(item => item.id !== itemId),\r\n          }\r\n        : mod\r\n    );\r\n    onModulesChange(updatedModules);\r\n  };\r\n\r\n  const moveContentItem = (moduleId: string, itemId: string, direction: 'up' | 'down') => {\r\n    const updatedModules = modules.map(mod => {\r\n      if (mod.id === moduleId) {\r\n        const currentIndex = mod.contents.findIndex(item => item.id === itemId);\r\n        if (currentIndex === -1) return mod;\r\n\r\n        const newContents = [...mod.contents];\r\n        let newIndex = currentIndex;\r\n\r\n        if (direction === 'up') {\r\n          newIndex = Math.max(0, currentIndex - 1);\r\n        } else {\r\n          newIndex = Math.min(mod.contents.length - 1, currentIndex + 1);\r\n        }\r\n\r\n        // Swap elements\r\n        const [movedItem] = newContents.splice(currentIndex, 1);\r\n        newContents.splice(newIndex, 0, movedItem);\r\n        return { ...mod, contents: newContents };\r\n      }\r\n      return mod;\r\n    });\r\n    onModulesChange(updatedModules);\r\n  };\r\n\r\n  // Prepare items for Ant Design Collapse component\r\n  const collapseItems: CollapseProps['items'] = modules.map((module, moduleIndex) => ({\r\n    key: module.id,\r\n    label: (\r\n      <div className=\"flex items-center justify-between w-full pr-4\">\r\n        <Text strong className=\"text-base text-gray-800\">{module.moduleName}</Text>\r\n        <Space size=\"small\">\r\n          <Button\r\n            icon={<UpOutlined />}\r\n            onClick={(e) => { e.stopPropagation(); moveModule(module.id, 'up'); }}\r\n            disabled={moduleIndex === 0}\r\n            className=\"rounded-full flex items-center justify-center p-1\"\r\n          />\r\n          <Button\r\n            icon={<DownOutlined />}\r\n            onClick={(e) => { e.stopPropagation(); moveModule(module.id, 'down'); }}\r\n            disabled={moduleIndex === modules.length - 1}\r\n            className=\"rounded-full flex items-center justify-center p-1\"\r\n          />\r\n          <Popconfirm\r\n            title=\"คุณแน่ใจหรือไม่ที่จะลบโมดูลนี้?\"\r\n            onConfirm={(e) => {\r\n              e?.stopPropagation();\r\n              deleteModule(module.id);\r\n            }}\r\n            okText=\"ใช่\"\r\n            cancelText=\"ไม่\"\r\n            placement=\"left\"\r\n          >\r\n            <Button\r\n              danger\r\n              icon={<DeleteOutlined />}\r\n              onClick={(e) => e.stopPropagation()}\r\n              className=\"rounded-full flex items-center justify-center p-1\"\r\n            />\r\n          </Popconfirm>\r\n        </Space>\r\n      </div>\r\n    ),\r\n    children: (\r\n      // Removed <Form> component here to avoid nesting forms\r\n      <div className=\"p-4 bg-gray-50 rounded-lg\">\r\n        <Form.Item label={<span className=\"font-semibold text-gray-700\">ชื่อโมดูล</span>}>\r\n          <Input\r\n            value={module.moduleName}\r\n            onChange={(e) => updateModule(module.id, e.target.value)}\r\n            placeholder=\"ชื่อโมดูล เช่น บทนำ, การนวดไทยเบื้องต้น\"\r\n            className=\"rounded-lg\"\r\n          />\r\n        </Form.Item>\r\n\r\n        <Text strong className=\"text-md text-gray-700 mb-2 block\">รายการเนื้อหาในโมดูล</Text>\r\n        {module.contents.length === 0 && (\r\n          <div className=\"text-center text-gray-400 p-4 border border-dashed rounded-lg mb-4\">\r\n            <Text>ยังไม่มีเนื้อหาในโมดูลนี้</Text>\r\n          </div>\r\n        )}\r\n\r\n        {module.contents.map((item, itemIndex) => {\r\n          // Initialize TipTap editor for each content item\r\n          const editor = useEditor({\r\n            extensions: [\r\n              StarterKit,\r\n              Link.configure({\r\n                openOnClick: false,\r\n              }),\r\n            ],\r\n            content: item.itemDescription,\r\n            onUpdate: ({ editor }) => {\r\n              updateContentItem(module.id, item.id, { itemDescription: editor.getHTML() });\r\n            },\r\n            editorProps: {\r\n              attributes: {\r\n                class: 'prose max-w-none focus:outline-none p-2 border border-gray-300 rounded-b-lg min-h-[100px] bg-white',\r\n              },\r\n            },\r\n          });\r\n\r\n          return (\r\n            <Card key={item.id} size=\"small\" className=\"mb-3 rounded-lg shadow-sm\">\r\n              <div className=\"flex justify-between items-center mb-2\">\r\n                <Text strong className=\"text-sm text-gray-800\">{item.itemTitle}</Text>\r\n                <Space size=\"small\">\r\n                  <Button\r\n                    icon={<UpOutlined />}\r\n                    onClick={() => moveContentItem(module.id, item.id, 'up')}\r\n                    disabled={itemIndex === 0}\r\n                    className=\"rounded-full flex items-center justify-center p-1\"\r\n                  />\r\n                  <Button\r\n                    icon={<DownOutlined />}\r\n                    onClick={() => moveContentItem(module.id, item.id, 'down')}\r\n                    disabled={itemIndex === module.contents.length - 1}\r\n                    className=\"rounded-full flex items-center justify-center p-1\"\r\n                  />\r\n                  <Popconfirm\r\n                    title=\"คุณแน่ใจหรือไม่ที่จะลบเนื้อหานี้?\"\r\n                    onConfirm={(e) => {\r\n                      e?.stopPropagation();\r\n                      deleteContentItem(module.id, item.id);\r\n                    }}\r\n                    okText=\"ใช่\"\r\n                    cancelText=\"ไม่\"\r\n                    placement=\"left\"\r\n                  >\r\n                    <Button\r\n                      danger\r\n                      icon={<DeleteOutlined />}\r\n                      className=\"rounded-full flex items-center justify-center p-1\"\r\n                    />\r\n                  </Popconfirm>\r\n                </Space>\r\n              </div>\r\n              <Form.Item label={<span className=\"font-semibold text-gray-700\">ชื่อเนื้อหา</span>} className=\"mb-2\">\r\n                <Input\r\n                  value={item.itemTitle}\r\n                  onChange={(e) => updateContentItem(module.id, item.id, { itemTitle: e.target.value })}\r\n                  placeholder=\"ชื่อเนื้อหา เช่น วิดีโอแนะนำ, เอกสารประกอบ\"\r\n                  className=\"rounded-lg\"\r\n                />\r\n              </Form.Item>\r\n              <Form.Item label={<span className=\"font-semibold text-gray-700\">คำอธิบายเนื้อหา</span>} className=\"mb-2\">\r\n                <TipTapToolbar editor={editor} />\r\n                <EditorContent editor={editor} />\r\n              </Form.Item>\r\n              {/* Future expansion: Add Select for itemType (video, quiz, document) and conditional inputs */}\r\n              {/* <Form.Item label=\"ประเภทเนื้อหา\" className=\"mb-2\">\r\n                <Select\r\n                  value={item.itemType}\r\n                  onChange={(value) => updateContentItem(module.id, item.id, { itemType: value })}\r\n                  className=\"rounded-lg\"\r\n                >\r\n                  <Option value=\"text\">ข้อความ</Option>\r\n                  <Option value=\"video\">วิดีโอ</Option>\r\n                  <Option value=\"quiz\">แบบทดสอบ</Option>\r\n                  <Option value=\"document\">เอกสาร</Option>\r\n                </Select>\r\n              </Form.Item> */}\r\n            </Card>\r\n          );\r\n        })}\r\n\r\n        <Button\r\n          type=\"dashed\"\r\n          onClick={() => addContentItem(module.id)}\r\n          block\r\n          icon={<PlusOutlined />}\r\n          className=\"mt-4 rounded-lg border-dashed border-gray-300 text-gray-600 hover:text-blue-500 hover:border-blue-500\"\r\n        >\r\n          เพิ่มเนื้อหาในโมดูล\r\n        </Button>\r\n      </div>\r\n    ),\r\n    className: \"mb-2 rounded-lg\",\r\n  }));\r\n\r\n  return (\r\n    <div className=\"course-content-manager\">\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <Text strong className=\"text-lg text-gray-700\">เนื้อหาหลักสูตรและโมดูล</Text>\r\n        <Button type=\"primary\" icon={<PlusOutlined />} onClick={addModule} className=\"rounded-lg bg-blue-500 hover:bg-blue-600\">\r\n          เพิ่มโมดูล\r\n        </Button>\r\n      </div>\r\n\r\n      {modules.length === 0 && (\r\n        <div className=\"text-center text-gray-500 p-8 border rounded-lg bg-gray-50\">\r\n          <Text>ยังไม่มีโมดูลเนื้อหา กรุณากด &quot;เพิ่มโมดูล&quot; เพื่อเริ่มต้น</Text>\r\n        </div>\r\n      )}\r\n\r\n      <Collapse accordion className=\"rounded-lg shadow-sm\" expandIconPosition=\"end\" items={collapseItems} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CourseContentManager;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 769, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/massage-spa-training-system/frontend/src/app/%28pages%29/admin/courses/manage/page.tsx"],"sourcesContent":["// src/app/(pages)/admin/courses/manage/page.tsx\r\n\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, message, Typography, Breadcrumb, Card, Row, Col, InputNumber,Space } from 'antd';\r\nimport { SaveOutlined, ArrowLeftOutlined, HomeOutlined, BookOutlined, AppstoreOutlined } from '@ant-design/icons';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport dayjs from 'dayjs';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport CourseContentManager, { CourseContentModule } from './CourseContentManager'; // Import the new component and its interfaces\r\n\r\nconst { Text, Title: AntdTitle } = Typography;\r\nconst { TextArea } = Input;\r\n\r\n// Interface for Course Data\r\ninterface CourseData {\r\n  id: string;\r\n  courseName: string;\r\n  description: string;\r\n  price: number;\r\n  durationHours: number; // Duration in hours\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  modules: CourseContentModule[]; // Array of modules for course content\r\n}\r\n\r\n// Default course data for initial state\r\nconst defaultCourseData: CourseData = {\r\n  id: uuidv4(),\r\n  courseName: '',\r\n  description: '',\r\n  price: 0,\r\n  durationHours: 0,\r\n  createdAt: dayjs().toISOString(),\r\n  updatedAt: dayjs().toISOString(),\r\n  modules: [], // Start with no modules\r\n};\r\n\r\nexport default function ManageCoursePage() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const courseId = searchParams.get('id');\r\n\r\n  const [form] = Form.useForm<CourseData>();\r\n  const [course, setCourse] = useState<CourseData>(defaultCourseData);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isEditMode, setIsEditMode] = useState(false);\r\n\r\n  // Load course data from localStorage on component mount if editing\r\n  useEffect(() => {\r\n    const initializeCourse = () => {\r\n      if (courseId) {\r\n        setIsEditMode(true);\r\n        try {\r\n          const storedCourses = JSON.parse(localStorage.getItem('courses') || '[]') as CourseData[];\r\n          const foundCourse = storedCourses.find(c => c.id === courseId);\r\n          if (foundCourse) {\r\n            setCourse(foundCourse);\r\n            form.setFieldsValue(foundCourse);\r\n          } else {\r\n            message.error('ไม่พบหลักสูตรที่ต้องการแก้ไข');\r\n            router.push('/admin/courses');\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Failed to parse courses from localStorage\", error);\r\n          message.error('เกิดข้อผิดพลาดในการโหลดหลักสูตร');\r\n          router.push('/admin/courses');\r\n        }\r\n      } else {\r\n        setIsEditMode(false);\r\n        form.setFieldsValue(defaultCourseData);\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    initializeCourse();\r\n  }, [courseId, form, router]);\r\n\r\n  // Callback to update modules state from CourseContentManager\r\n  const handleModulesChange = (newModules: CourseContentModule[]) => {\r\n    setCourse(prev => ({\r\n      ...prev,\r\n      modules: newModules,\r\n      updatedAt: dayjs().toISOString(),\r\n    }));\r\n    // Also update form values so Ant Design form is in sync (important for saving)\r\n    form.setFieldsValue({ modules: newModules });\r\n  };\r\n\r\n  // Handle form submission\r\n  const onFinish = (values: CourseData) => {\r\n    try {\r\n      const now = dayjs().toISOString();\r\n      const finalCourse: CourseData = {\r\n        ...course, // Keep existing ID, createdAt if editing\r\n        ...values, // Take updated values from form\r\n        modules: course.modules, // Ensure modules from state are used\r\n        createdAt: isEditMode ? course.createdAt : now,\r\n        updatedAt: now,\r\n      };\r\n\r\n      const storedCourses = JSON.parse(localStorage.getItem('courses') || '[]') as CourseData[];\r\n      let updatedCourses: CourseData[];\r\n\r\n      if (isEditMode) {\r\n        updatedCourses = storedCourses.map(c => c.id === finalCourse.id ? finalCourse : c);\r\n        message.success('อัปเดตหลักสูตรเรียบร้อยแล้ว!');\r\n      } else {\r\n        updatedCourses = [...storedCourses, finalCourse];\r\n        message.success('สร้างหลักสูตรใหม่เรียบร้อยแล้ว!');\r\n      }\r\n      localStorage.setItem('courses', JSON.stringify(updatedCourses));\r\n      router.push('/admin/courses'); // Redirect back to course list\r\n    } catch (error) {\r\n      console.error(\"Failed to save course data to localStorage\", error);\r\n      message.error('เกิดข้อผิดพลาดในการบันทึกหลักสูตร');\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    router.push('/admin/courses');\r\n  };\r\n\r\n  const breadcrumbItems = [\r\n    {\r\n      title: <a href=\"/admin/dashboard\"><HomeOutlined /> หน้าหลัก</a>,\r\n    },\r\n    {\r\n      title: <a href=\"/admin/courses\"><BookOutlined /> หลักสูตร</a>,\r\n    },\r\n    {\r\n      title: <><AppstoreOutlined /> {courseId ? 'แก้ไขหลักสูตร' : 'สร้างหลักสูตรใหม่'}</>,\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-screen\">\r\n        <Text>กำลังโหลด...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen\">\r\n      <Breadcrumb className=\"mb-6\" items={breadcrumbItems} />\r\n\r\n      <AntdTitle level={1} className=\"text-3xl font-bold mb-8 text-gray-800\">\r\n        {courseId ? 'แก้ไขหลักสูตร' : 'สร้างหลักสูตรใหม่'}\r\n      </AntdTitle>\r\n\r\n      <Card className=\"rounded-xl shadow-custom-light p-6\">\r\n        <Form\r\n          form={form}\r\n          layout=\"vertical\"\r\n          name=\"manage_course_form\"\r\n          onFinish={onFinish}\r\n          initialValues={course} // Use the course state for initial values\r\n        >\r\n          <Row gutter={[24, 24]}>\r\n            <Col xs={24} lg={12}>\r\n              <AntdTitle level={4} className=\"text-gray-700 mb-6\">ข้อมูลหลักสูตร</AntdTitle>\r\n              <Form.Item\r\n                name=\"courseName\"\r\n                label={<span className=\"font-semibold text-gray-700\">ชื่อหลักสูตร</span>}\r\n                rules={[{ required: true, message: 'กรุณากรอกชื่อหลักสูตร!' }]}\r\n              >\r\n                <Input placeholder=\"เช่น หลักสูตรนวดแผนไทยเบื้องต้น\" className=\"rounded-lg\" />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"description\"\r\n                label={<span className=\"font-semibold text-gray-700\">คำอธิบายหลักสูตร</span>}\r\n                rules={[{ required: true, message: 'กรุณากรอกคำอธิบายหลักสูตร!' }]}\r\n              >\r\n                <TextArea rows={4} placeholder=\"คำอธิบายโดยละเอียดเกี่ยวกับหลักสูตร\" className=\"rounded-lg\" />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"price\"\r\n                label={<span className=\"font-semibold text-gray-700\">ราคา (บาท)</span>}\r\n                rules={[{ required: true, message: 'กรุณากรอกราคา!', type: 'number', min: 0 }]}\r\n              >\r\n                <InputNumber min={0} className=\"w-full rounded-lg\" />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"durationHours\"\r\n                label={<span className=\"font-semibold text-gray-700\">ระยะเวลา (ชั่วโมง)</span>}\r\n                rules={[{ required: true, message: 'กรุณากรอกระยะเวลา!', type: 'number', min: 0 }]}\r\n              >\r\n                <InputNumber min={0} className=\"w-full rounded-lg\" />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col xs={24} lg={12}>\r\n              {/* Course Content Manager Component */}\r\n              {/* We don't use Form.Item directly for modules because CourseContentManager manages its own internal state and calls onModulesChange */}\r\n              <CourseContentManager\r\n                modules={course.modules}\r\n                onModulesChange={handleModulesChange}\r\n              />\r\n            </Col>\r\n          </Row>\r\n\r\n          <Form.Item className=\"mt-8\">\r\n            <Space>\r\n              <Button\r\n                icon={<ArrowLeftOutlined />}\r\n                onClick={handleCancel}\r\n                className=\"rounded-lg shadow-md px-6 py-3 text-base\"\r\n              >\r\n                กลับ\r\n              </Button>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                icon={<SaveOutlined />}\r\n                className=\"bg-blue-500 hover:bg-blue-600 text-white rounded-lg shadow-md px-6 py-3 text-base\"\r\n              >\r\n                บันทึกหลักสูตร\r\n              </Button>\r\n            </Space>\r\n          </Form.Item>\r\n        </Form>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,gDAAgD;;;;;AAGhD;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,sTAAoF,8CAA8C;;;AARlI;;;;;;;;AAUA,MAAM,EAAE,IAAI,EAAE,OAAO,SAAS,EAAE,GAAG,6LAAA,CAAA,aAAU;AAC7C,MAAM,EAAE,QAAQ,EAAE,GAAG,mLAAA,CAAA,QAAK;AAc1B,wCAAwC;AACxC,MAAM,oBAAgC;IACpC,IAAI,CAAA,GAAA,wLAAA,CAAA,KAAM,AAAD;IACT,YAAY;IACZ,aAAa;IACb,OAAO;IACP,eAAe;IACf,WAAW,CAAA,GAAA,wIAAA,CAAA,UAAK,AAAD,IAAI,WAAW;IAC9B,WAAW,CAAA,GAAA,wIAAA,CAAA,UAAK,AAAD,IAAI,WAAW;IAC9B,SAAS,EAAE;AACb;AAEe,SAAS;;IACtB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,eAAe,CAAA,GAAA,qIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,MAAM,CAAC,KAAK,GAAG,iLAAA,CAAA,OAAI,CAAC,OAAO;IAC3B,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAc;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,mEAAmE;IACnE,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;sCAAE;YACR,MAAM;+DAAmB;oBACvB,IAAI,UAAU;wBACZ,cAAc;wBACd,IAAI;4BACF,MAAM,gBAAgB,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,cAAc;4BACpE,MAAM,cAAc,cAAc,IAAI;2FAAC,CAAA,IAAK,EAAE,EAAE,KAAK;;4BACrD,IAAI,aAAa;gCACf,UAAU;gCACV,KAAK,cAAc,CAAC;4BACtB,OAAO;gCACL,uLAAA,CAAA,UAAO,CAAC,KAAK,CAAC;gCACd,OAAO,IAAI,CAAC;4BACd;wBACF,EAAE,OAAO,OAAO;4BACd,QAAQ,KAAK,CAAC,6CAA6C;4BAC3D,uLAAA,CAAA,UAAO,CAAC,KAAK,CAAC;4BACd,OAAO,IAAI,CAAC;wBACd;oBACF,OAAO;wBACL,cAAc;wBACd,KAAK,cAAc,CAAC;oBACtB;oBACA,WAAW;gBACb;;YAEA;QACF;qCAAG;QAAC;QAAU;QAAM;KAAO;IAE3B,6DAA6D;IAC7D,MAAM,sBAAsB,CAAC;QAC3B,UAAU,CAAA,OAAQ,CAAC;gBACjB,GAAG,IAAI;gBACP,SAAS;gBACT,WAAW,CAAA,GAAA,wIAAA,CAAA,UAAK,AAAD,IAAI,WAAW;YAChC,CAAC;QACD,+EAA+E;QAC/E,KAAK,cAAc,CAAC;YAAE,SAAS;QAAW;IAC5C;IAEA,yBAAyB;IACzB,MAAM,WAAW,CAAC;QAChB,IAAI;YACF,MAAM,MAAM,CAAA,GAAA,wIAAA,CAAA,UAAK,AAAD,IAAI,WAAW;YAC/B,MAAM,cAA0B;gBAC9B,GAAG,MAAM;gBACT,GAAG,MAAM;gBACT,SAAS,OAAO,OAAO;gBACvB,WAAW,aAAa,OAAO,SAAS,GAAG;gBAC3C,WAAW;YACb;YAEA,MAAM,gBAAgB,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,cAAc;YACpE,IAAI;YAEJ,IAAI,YAAY;gBACd,iBAAiB,cAAc,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,YAAY,EAAE,GAAG,cAAc;gBAChF,uLAAA,CAAA,UAAO,CAAC,OAAO,CAAC;YAClB,OAAO;gBACL,iBAAiB;uBAAI;oBAAe;iBAAY;gBAChD,uLAAA,CAAA,UAAO,CAAC,OAAO,CAAC;YAClB;YACA,aAAa,OAAO,CAAC,WAAW,KAAK,SAAS,CAAC;YAC/C,OAAO,IAAI,CAAC,mBAAmB,+BAA+B;QAChE,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8CAA8C;YAC5D,uLAAA,CAAA,UAAO,CAAC,KAAK,CAAC;QAChB;IACF;IAEA,MAAM,eAAe;QACnB,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,kBAAkB;QACtB;YACE,qBAAO,6LAAC;gBAAE,MAAK;;kCAAmB,6LAAC,qNAAA,CAAA,eAAY;;;;;oBAAG;;;;;;;QACpD;QACA;YACE,qBAAO,6LAAC;gBAAE,MAAK;;kCAAiB,6LAAC,qNAAA,CAAA,eAAY;;;;;oBAAG;;;;;;;QAClD;QACA;YACE,qBAAO;;kCAAE,6LAAC,6NAAA,CAAA,mBAAgB;;;;;oBAAG;oBAAE,WAAW,kBAAkB;;;QAC9D;KACD;IAED,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;0BAAK;;;;;;;;;;;IAGZ;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,6LAAA,CAAA,aAAU;gBAAC,WAAU;gBAAO,OAAO;;;;;;0BAEpC,6LAAC;gBAAU,OAAO;gBAAG,WAAU;0BAC5B,WAAW,kBAAkB;;;;;;0BAGhC,6LAAC,iLAAA,CAAA,OAAI;gBAAC,WAAU;0BACd,cAAA,6LAAC,iLAAA,CAAA,OAAI;oBACH,MAAM;oBACN,QAAO;oBACP,MAAK;oBACL,UAAU;oBACV,eAAe;;sCAEf,6LAAC,+KAAA,CAAA,MAAG;4BAAC,QAAQ;gCAAC;gCAAI;6BAAG;;8CACnB,6LAAC,+KAAA,CAAA,MAAG;oCAAC,IAAI;oCAAI,IAAI;;sDACf,6LAAC;4CAAU,OAAO;4CAAG,WAAU;sDAAqB;;;;;;sDACpD,6LAAC,iLAAA,CAAA,OAAI,CAAC,IAAI;4CACR,MAAK;4CACL,qBAAO,6LAAC;gDAAK,WAAU;0DAA8B;;;;;;4CACrD,OAAO;gDAAC;oDAAE,UAAU;oDAAM,SAAS;gDAAyB;6CAAE;sDAE9D,cAAA,6LAAC,mLAAA,CAAA,QAAK;gDAAC,aAAY;gDAAkC,WAAU;;;;;;;;;;;sDAEjE,6LAAC,iLAAA,CAAA,OAAI,CAAC,IAAI;4CACR,MAAK;4CACL,qBAAO,6LAAC;gDAAK,WAAU;0DAA8B;;;;;;4CACrD,OAAO;gDAAC;oDAAE,UAAU;oDAAM,SAAS;gDAA6B;6CAAE;sDAElE,cAAA,6LAAC;gDAAS,MAAM;gDAAG,aAAY;gDAAsC,WAAU;;;;;;;;;;;sDAEjF,6LAAC,iLAAA,CAAA,OAAI,CAAC,IAAI;4CACR,MAAK;4CACL,qBAAO,6LAAC;gDAAK,WAAU;0DAA8B;;;;;;4CACrD,OAAO;gDAAC;oDAAE,UAAU;oDAAM,SAAS;oDAAkB,MAAM;oDAAU,KAAK;gDAAE;6CAAE;sDAE9E,cAAA,6LAAC,mMAAA,CAAA,cAAW;gDAAC,KAAK;gDAAG,WAAU;;;;;;;;;;;sDAEjC,6LAAC,iLAAA,CAAA,OAAI,CAAC,IAAI;4CACR,MAAK;4CACL,qBAAO,6LAAC;gDAAK,WAAU;0DAA8B;;;;;;4CACrD,OAAO;gDAAC;oDAAE,UAAU;oDAAM,SAAS;oDAAsB,MAAM;oDAAU,KAAK;gDAAE;6CAAE;sDAElF,cAAA,6LAAC,mMAAA,CAAA,cAAW;gDAAC,KAAK;gDAAG,WAAU;;;;;;;;;;;;;;;;;8CAGnC,6LAAC,+KAAA,CAAA,MAAG;oCAAC,IAAI;oCAAI,IAAI;8CAGf,cAAA,6LAAC,iLAAA,CAAA,UAAoB;wCACnB,SAAS,OAAO,OAAO;wCACvB,iBAAiB;;;;;;;;;;;;;;;;;sCAKvB,6LAAC,iLAAA,CAAA,OAAI,CAAC,IAAI;4BAAC,WAAU;sCACnB,cAAA,6LAAC,mMAAA,CAAA,QAAK;;kDACJ,6LAAC,qMAAA,CAAA,SAAM;wCACL,oBAAM,6LAAC,+NAAA,CAAA,oBAAiB;;;;;wCACxB,SAAS;wCACT,WAAU;kDACX;;;;;;kDAGD,6LAAC,qMAAA,CAAA,SAAM;wCACL,MAAK;wCACL,UAAS;wCACT,oBAAM,6LAAC,qNAAA,CAAA,eAAY;;;;;wCACnB,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf;GA1LwB;;QACP,qIAAA,CAAA,YAAS;QACH,qIAAA,CAAA,kBAAe;QAGrB,iLAAA,CAAA,OAAI,CAAC;;;KALE","debugId":null}}]
}